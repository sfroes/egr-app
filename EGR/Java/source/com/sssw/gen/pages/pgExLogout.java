// *** Generated Source File ***
// Portions Copyright (c) 1996-2001, SilverStream Software, Inc., All Rights Reserved

package com.sssw.gen.pages; // generated by SilverStream: do not edit

import java.awt.*;
import java.util.*;
import java.math.*;
import com.sssw.rt.gui.*;
import com.sssw.rt.util.*;
import com.sssw.rt.event.*;
import java.awt.event.*;
import com.sssw.rt.expr.*;
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import com.sssw.shr.page.*;
import com.sssw.shr.http.AgiHttpServletRequest;
import com.sssw.shr.http.AgiHttpServletResponse;
import com.sssw.shr.http.AgoServletException;
import com.sssw.srv.api.*;
import com.sssw.srv.busobj.*;
import com.sssw.srv.mail.*;

public class pgExLogout extends AgpPage // generated by SilverStream: do not edit
{	
	String SISTEMA = "";
	String PAGINA = "";
public pgExLogout()
	{
		//==== Warning: SilverStream-generated method: do not edit. All changes will be lost ===
	}

	public void init() throws Exception
	{
		//==== Warning: SilverStream-generated method: do not edit. All changes will be lost ===
		agData.setDataMode(AgoData.DATA_MODE_NORMAL);

		addChildren();

		addBindings();

		return;
	}

	private void addChildren()
	{
		//==== Warning: SilverStream-generated method: do not edit. All changes will be lost ===
	}

	protected void addBindings()
	{
		//==== Warning: SilverStream-generated method: do not edit. All changes will be lost ===
		addExpDependencies();
	}

	protected void pageLoaded(AgiHttpServletRequest req, AgiHttpServletResponse res) throws Exception
	{
      SISTEMA = getDatabase() + " - ";	
      PAGINA = getPath().substring(getPath().lastIndexOf('/') + 1, getPath().lastIndexOf('.'));
	}

	protected void pageRequestEnd(AgiHttpServletRequest req, AgiHttpServletResponse res) throws Exception
	{
	  // Configura o controle de cache
		Hashtable hs = new Hashtable();		
		hs.put("response", res);
		invokeBusinessObject("Util:boCacheConfig", hs);
	}

	

protected void pageRequestBegin(AgiHttpServletRequest req, AgiHttpServletResponse res) throws Exception
	{
	  	final String METODO = ".pageRequestBegin()";
	
	  	try 
		{
		    AgiSession session = (AgiSession)req.getSession();

	        //para servidores je22 
	        writeScript("document.cookie = 'JSESSIONID=NULL; path=/;expires=Fri, 02-Jan-1970 00:00:00 GMT';");

	        //para servidores nao j2ee
	        writeScript("document.cookie = 'sess=NULL; path=/; expires=Fri,02-Jan-1970 00:00:00 GMT'");

	        //utilizar location = xxx.html ao inves do showPage
	        //porque as vezes, quando o browser nao utiliza
	        //cookies, ele passa o jsession na uri
	        // xxx.html?JSESSIONID='2323424264478756'

//	        writeScript("location='pgesvLogin.html'");
	        writeScript("location='http://www.pucminas.br'");

	        //este e novo e sei la pro que serve
	        res.setHeader("Connection", "close");

	        //invalida a sessao
	        session.invalidate();		
		}
		catch(Exception e)
		{
			Hashtable hs = new Hashtable();
			hs.put("pIdentificador", SISTEMA + PAGINA + METODO);
			hs.put("pException", e);
			invokeBusinessObject("Util:boEnviaMsgConsole", hs);
		}
	}

	
}
